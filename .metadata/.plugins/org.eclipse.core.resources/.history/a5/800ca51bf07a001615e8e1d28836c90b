import java.util.HashMap;

public class LRU_Cache {
	public class LRUCache {
	    HashMap<Integer, ListNode> map;
	    ListNode dummy;
	    ListNode end;
	    int capacity;
	    
	    
	    public LRUCache(int capacity) {
	        this.map = new HashMap<Integer, ListNode> ();
	        this.dummy = new ListNode(0, 0);
	        this.end = dummy;
	        this.capacity = capacity;
	    }
	    
	    public int get(int key) {
	        if (map.containsKey(key)) {
	            return map.get(key).value;
	        } else {
	            return -1;
	        }
	    }
	    
	    public void set(int key, int value) {
	        if (capacity <= 0) {
	            return;
	        }
	        if (map.size() < capacity) {
	            end.next = new ListNode(key, value);
	            map.put(key, end);
	            end = end.next;
	            return;
	        }
	        if (map.containsKey(key)) {
	            ListNode prev = map.get(key);
	            if (prev.next == end) {
	                prev.next.value = value;
	            } else {
	                ListNode curr = prev.next;
	                prev.next = curr.next;
	                curr.next = null;
	                curr.value = value;
	                end.next = curr;
	                map.put(key, end);
	                end = end.next;
	            }
	        } else {
	            ListNode curr = dummy.next;
	            dummy.next = dummy.next.next;
	            curr.key = key;
	            curr.value = value;
	            curr.next = null;
	            end.next = curr;
	            map.put(key, end);
	            end = end.next;
	            
	        }
	    }
	    
	    public class ListNode {
	        public int value;
	        public int key;
	        public ListNode next;
	        
	        public ListNode(int key, int val) {
	            this.value = val;
	            this.key = key;
	            this.next = null;
	        }
	    }
	}
	
	public static void main(String[] args) {
		LRUCache tmp = new LRUCache(10);
		
	}
}
